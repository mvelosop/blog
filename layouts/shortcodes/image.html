{{ if not (.Get "href") }}<a href="{{ $.Site.BaseURL }}{{ .Get "src" }}" target="_blank">{{ end }}
<figure{{ if .Get "class" }} class="{{ .Get "class" }}"{{ end }}>
  <img src="{{ $.Site.BaseURL }}{{ .Get "src" }}" alt="{{ .Page.Title }} {{ .Get "src" }}" width="auto">
  {{ if .Get "caption" }}
  <figcaption>
    {{ if .Get "href" }}
    <a href="{{ .Get "href" }}" target="_blank">{{ .Get "caption" }}</a>
    {{ else }}
    {{ .Get "caption" }}
    {{ end }}
  </figcaption>
  {{ end }}
</figure>
{{ if not (.Get "href") }}</a>{{ end }}
